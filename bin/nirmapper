#!/usr/bin/env python
import os

import click

from nirmapper.examples import generate_cube_example, generate_elephant_example, generate_tooth_example


@click.group()
def cli():
    pass


@cli.command()
@click.argument('src', nargs=-1)
@click.option('--type', type=click.Choice(['cube', 'tooth', 'elephant']), default='tooth',
              help='generates a example in current directory')
def example(src, type):
    type_str = 'Generating ' + type + ' example in current directory.'
    click.echo(type_str)

    src = __check_path(src)

    if type == 'cube':
        generate_cube_example(src)
    elif type == 'tooth':
        generate_tooth_example(src)
    elif type == 'elephant':
        generate_elephant_example(src)
    else:
        click.echo('Example type not known!')
        return
    click.echo('Finished - have a nice day!')


@cli.command()
@click.argument('src', nargs=-1)
@click.argument('dst', nargs=1)
def copy(src, dst):
    for fn in src:
        click.echo('move %s to folder %s' % (fn, dst))


def __check_path(path):
    path = ''.join(path)

    if not os.path.exists(path):
        os.makedirs(path)
    if not path.endswith('/'):
        path += '/'

    return path


if __name__ == '__main__':
    click.echo('This is 3DNIRMapper-CLI:')
    cli()
